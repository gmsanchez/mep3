#VRML_SIM R2022a utf8
# template language: javascript

PROTO Resistanceleft [
	hiddenField SFVec3f anchor_center    -0.0042 0.1345 0.127
	hiddenField SFVec3f x_axis 1 0 0
	hiddenField SFVec3f y_axis 0 1 0
	hiddenField SFVec3f z_axis 0 0 1
	hiddenField SFFloat hand_mass 0.05
	hiddenField SFFloat resistance_position 0.015
]
{
%< 
  var anchor;
  var axis;
  var rotation;
  var position;
  var min_position;
  var max_position;
  
  min_position = 165/180*Math.PI;
  max_position = 220/180*Math.PI; 
  position = 220/180*Math.PI;
  anchor = fields.anchor_center.value;
  axis = fields.x_axis.value;
>%
Transform {
	children [
		HingeJoint {
			jointParameters HingeJointParameters {
				axis %<= axis.x >% %<= axis.y >% %<= axis.z >%
				anchor %<= anchor.x >% %<= anchor.y >% %<= anchor.z >%
				position %<= position >%
			}
			device [
				RotationalMotor {
					name "measure_left"
					minPosition %<= min_position >%
					maxPosition %<= max_position >%
				}
				PositionSensor {
					name "measure_left_sensor"
				}
			]
			endPoint Solid {
				name "measure_left"
				children [
					Shape {
						appearance PBRAppearance {
							baseColor 0.4 0.4 0.4
							metalness 0	
							roughness 1
						}
						geometry Mesh {
							url ["assets/meshes/RobotFlorijan/Resistance_left.obj"]
						}
					}
					TouchSensor {
						name "measure_left_touch_sensor_front"
						contactMaterial "resistance_measurement"
						boundingObject Group {
							children [
								Transform {
									translation 0.0188 0.10176 0.18819
									rotation 1 0 0 0.52 
									children [
										DEF resistance_pad Capsule {
											height 0.018
											radius 0.004
											subdivision 16
										}
									]
								}
							]
						}
						physics Physics {}
						type "force-3d"
					}
					TouchSensor {
						name "measure_left_touch_sensor_back"
						contactMaterial "resistance_measurement"
						boundingObject Group {
							children [
								Transform {
									translation -0.0332 0.10176 0.18819
									rotation 1 0 0 0.52 
									children [
										USE resistance_pad
									]
								}
							]
						}
					}
				]
			}
		}
	]
}
}

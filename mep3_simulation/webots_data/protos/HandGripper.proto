#VRML_SIM R2022a utf8
#template language: javascript

PROTO HandGripper[
	hiddenField SFVec3f anchor_center    0.0855 0.0893 0.19593
	hiddenField SFVec3f x_axis 1 0 0
	hiddenField SFVec3f y_axis 0 1 0
	hiddenField SFVec3f z_axis 0 0 1
	hiddenField SFFloat hand_mass 0.05
]
{
%< 
	var anchor;
	var axis;
	var rotation;
	var position;
	var min_position;
	var max_position;
  
  min_position = 210/180*Math.PI;
  max_position = 300/180*Math.PI;
  position = 225/180*Math.PI;
  anchor = fields.anchor_center.value;
  axis = fields.x_axis.value;
>%
Transform {
	children [
		HingeJoint {
			jointParameters HingeJointParameters {
				axis %<= axis.x >% %<= axis.y >% %<= axis.z >%
				anchor %<= anchor.x >% %<= anchor.y >% %<= anchor.z >%
				position %<= position >%
			}
			device [
				RotationalMotor {
					name "gripper"
					minPosition %<= min_position >%
					maxPosition %<= max_position >%
				}
				PositionSensor {
					name "gripper_sensor"
				}
			]
			endPoint Solid {
				name "gripper"
				children [
					Shape {
						appearance PBRAppearance {
							baseColor 0.4 0.4 0.4
							metalness 0
							roughness 1
						}
						geometry Mesh {
							url ["assets/meshes/RobotKosta/Hand_gripper.obj"]
						}
						
					}
					Connector {
						name "gripper_connector"
						translation 0.0645 0.0893 0.11626
						rotation 0 1 0 1.5708
						type "active"
						distanceTolerance 0.075
						axisTolerance 0.1
						numberOfRotations 0
						snap FALSE
                    }
					
				]
			}
		}
	]
}
}

<root main_tree_to_execute="BehaviorTree">
    <!-- ////////// -->
    <BehaviorTree ID="BehaviorTree">
        <SequenceStar>
            <Action state="1" ID="WaitMatchStartAction"/>
            <SubTree __shared_blackboard="true" ID="go_to_pedestal"/>
        </SequenceStar>
    </BehaviorTree>
    <!-- ////////// -->
    <BehaviorTree ID="go_to_pedestal">
        <SequenceStar>
            <Action ID="NavigateToAction" goal="1.04;-0.42;-1.3"/>
            <Action ID="PreciseNavigateToAction" goal="1.12;-0.71;-0.65"/>
            <Parallel failure_threshold="1" success_threshold="3">
                <Action position="-95" server_name="dynamixel_command/arm_right_motor_base" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
                <Action position="42" server_name="dynamixel_command/arm_right_motor_mid" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
                <Action position="134" server_name="dynamixel_command/arm_right_motor_gripper" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
            </Parallel>
            <Action server_name="vacuum_pump_command/arm_right_connector" connect="1" result="1" ID="VacuumPumpCommandAction"/>
            <Action position="0" server_name="dynamixel_command/arm_right_motor_mid" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
            <Parallel failure_threshold="1" success_threshold="2">
                <SubTree __shared_blackboard="true" ID="swap"/>
                <Action ID="NavigateToAction" goal="0.95;-0.61;-0.61"/>
            </Parallel>
            <Action position="90" server_name="dynamixel_command/arm_left_motor_gripper" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
            <Action position="90" server_name="dynamixel_command/arm_left_motor_mid" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
            <Action server_name="vacuum_pump_command/arm_left_connector" connect="0" result="0" ID="VacuumPumpCommandAction"/>
            <Action position="0" server_name="dynamixel_command/arm_left_motor_mid" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
        </SequenceStar>
    </BehaviorTree>
    <!-- ////////// -->
    <BehaviorTree ID="swap">
        <Sequence>
            <Parallel failure_threshold="1" success_threshold="3">
                <Action position="0" server_name="dynamixel_command/arm_right_motor_base" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
                <Action position="-5" server_name="dynamixel_command/arm_right_motor_mid" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
                <Action position="95" server_name="dynamixel_command/arm_right_motor_gripper" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
            </Parallel>
            <Parallel failure_threshold="1" success_threshold="3">
                <Action position="0" server_name="dynamixel_command/arm_left_motor_base" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
                <Action position="-5" server_name="dynamixel_command/arm_left_motor_mid" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
                <Action position="95" server_name="dynamixel_command/arm_left_motor_gripper" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
            </Parallel>
            <Action server_name="vacuum_pump_command/arm_left_connector" connect="1" result="0" ID="VacuumPumpCommandAction"/>
            <Action server_name="vacuum_pump_command/arm_right_connector" connect="0" result="0" ID="VacuumPumpCommandAction"/>
            <Parallel failure_threshold="1" success_threshold="2">
                <Action position="90" server_name="dynamixel_command/arm_left_motor_base" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
                <Action position="-90" server_name="dynamixel_command/arm_right_motor_base" timeout="5" velocity="90" result="0" tolerance="2" ID="DynamixelCommandAction"/>
            </Parallel>
        </Sequence>
    </BehaviorTree>
    <!-- ////////// -->
    <TreeNodesModel>
        <Action ID="DynamixelCommandAction">
            <input_port name="position"/>
            <input_port name="result"/>
            <input_port name="server_name"/>
            <input_port name="timeout"/>
            <input_port name="tolerance"/>
            <input_port name="velocity"/>
        </Action>
        <Action ID="MotionCommandAction">
            <input_port default="0" name="acceleration_angular">[rad/s^2]</input_port>
            <input_port default="0" name="acceleration_linear">[m/s^2]</input_port>
            <input_port name="command">[forward/rotate_relative/rotate_absolute]</input_port>
            <output_port name="result">[success/drift]</output_port>
            <input_port default="0" name="value">value to pass to motion function, in meters or radians</input_port>
            <input_port default="0" name="velocity_angular">[rad/s]</input_port>
            <input_port default="0" name="velocity_linear">[m/s]</input_port>
        </Action>
        <Action ID="NavigateToAction">
            <input_port name="goal"/>
        </Action>
        <Action ID="PreciseNavigateToAction">
            <input_port name="goal"/>
        </Action>
        <Action ID="VacuumPumpCommandAction">
            <input_port name="connect"/>
            <input_port name="result"/>
            <input_port name="server_name"/>
        </Action>
        <Action ID="WaitMatchStartAction">
            <input_port name="state"/>
        </Action>
        <SubTree ID="go_to_pedestal">
            <input_port name="__shared_blackboard"/>
        </SubTree>
        <SubTree ID="swap">
            <input_port default="true" name="__shared_blackboard"/>
        </SubTree>
    </TreeNodesModel>
    <!-- ////////// -->
</root>

